<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>pcl_aggregator: SafeForest Point Cloud Aggregator</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">pcl_aggregator
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">SafeForest Point Cloud Aggregator </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This package is intended to provide functionality to aggregate pointclouds provenient from different sources. For instance, a deprojected depth camera and LiDAR sensors. Currently, the depth camera deprojection is done solely with CPU processing, but a version with CUDA computing is under development.</p>
<p>The PointCloud aggregator basically does the registration of the different sources, and manages the storage of the corresponding PointClouds.</p>
<p>The registration is ICP-based, and the merged PointCloud is downsampled using voxel grid.</p>
<p>The RGBD deprojector subscribes for both a color image and a depth aligned to color image. Note that the depth frame must really be aligned, because the color frame is used to add color to the points.</p>
<p>The hardware tested during the development of this package was the RealSense D435i depth camera and 3 Livox Horizon LiDAR sensors merged with a Livox Hub.</p>
<p>To replicate this exact scenario, it is recommended to use the official RealSense ROS wrapper as well as the Livox ROS wrapper. They provide the data already published through topics, and deal with little details we don't have to worry about.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Dependencies</h1>
<ul>
<li>PCL</li>
<li>Eigen 3</li>
<li>CUDA Toolkit (+ CUDA-enabled GPU)</li>
<li>OpenMP</li>
<li>OpenCV</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
Build</h1>
<ul>
<li>Install the dependencies.</li>
<li>Clone the package to a ROS workspace.</li>
<li>Build the workspace: <code>catkin_make</code>.</li>
<li>Source the workspace setup: <code>source devel/setup.bash</code>.</li>
<li>Start the nodes as needed.</li>
</ul>
<h1><a class="anchor" id="autotoc_md3"></a>
Nodes</h1>
<h2><a class="anchor" id="autotoc_md4"></a>
pcl_aggregator_node</h2>
<h3><a class="anchor" id="autotoc_md5"></a>
Parameters</h3>
<ul>
<li><code>n_pointclouds</code>: Number of PointClouds to be subscribed. Default: 1.</li>
<li><code>max_pointcloud_age</code>: The PointClouds considered to register are the ones newer than the age specified on this parameter in seconds. Default: 2.</li>
<li><code>robot_base</code>: The frame to considered as robot base. Default: base_link.</li>
<li><code>publish_rate</code>: The publish rate in Hz. Default: 10. </li>
</ul>
<h3><a class="anchor" id="autotoc_md6"></a>
Subscribed topics</h3>
<ul>
<li><code>pointcloudn</code>: PointCloud topics, where $0 \leq n &lt; n_{pointclouds}$. Example: <code>pointcloud0</code>. Type: sensor_msgs/PointCloud2. </li>
</ul>
<h3><a class="anchor" id="autotoc_md7"></a>
Published topics</h3>
<ul>
<li><code>merged_pointcloud</code>: Merged PointCloud data. Type: sensor_msgs/PointCloud2.</li>
</ul>
<h2><a class="anchor" id="autotoc_md8"></a>
rgbd_deprojector_node</h2>
<h3><a class="anchor" id="autotoc_md9"></a>
Subscribed topics</h3>
<ul>
<li><code>/camera/aligned_depth_to_color/camera_info</code>: Depth camera information data. Type: sensor_msgs/CameraInfo.</li>
<li><code>/camera/aligned_depth_to_color/image_raw</code>: Depth frame aligned to the RGB frame. Type: sensor_msgs/Image.</li>
<li><code>/camera/color/image_raw</code>: Color frame. Type: sensor_msgs/Image. </li>
</ul>
<h3><a class="anchor" id="autotoc_md10"></a>
Published topics</h3>
<ul>
<li><code>/pointcloud</code>: deprojected PointCloud data. Type: sensor_msgs/PointCloud2. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
